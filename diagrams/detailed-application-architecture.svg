<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1549px" preserveAspectRatio="none" style="width:1465px;height:1549px;" version="1.1" viewBox="0 0 1465 1549" width="1465px" zoomAndPan="magnify"><defs/><g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="451" x="1001" y="9.2822">Container diagram \ nDetailed application point of view \ n My Online Info Project (AllMyData)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="287" x="582.5" y="28.3486">detailed-application-architecture</text><!--MD5=[0b1e1d5afbe222e194d3592c757a343c]
cluster administration--><rect fill="#FFFFFF" height="104" style="stroke:#444444;stroke-width:1.0;stroke-dasharray:7.0,7.0;" width="232" x="1047" y="1130.5938"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="216" x="1055" y="1147.4453">System administration B</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="62" x="1132" y="1162.3574">[System]</text><!--MD5=[62fb3842b33c0a138932b21a359a9115]
cluster si--><rect fill="#FFFFFF" height="1369.5" style="stroke:#444444;stroke-width:1.0;stroke-dasharray:7.0,7.0;" width="1030" x="7" y="39.5938"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="175" x="434.5" y="56.4453">Information System</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="62" x="491" y="71.3574">[System]</text><!--MD5=[1cf0bab96cde2dfe8ffc5dec0b758635]
entity scompta--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="190" x="1064" y="1173.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="170" x="1074" y="1198.4453">Accounting system</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="89" x="1114.5" y="1213.3574">[REST service]</text><!--MD5=[2932d97d9db0b825879b51fec21a89b9]
entity static_resources--><rect fill="#438DD5" height="136.4063" style="stroke:#3C7FC0;stroke-width:1.5;" width="217" x="669.5" y="82.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="162" x="694" y="107.4453">gui-allmydata Web</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="96" x="730" y="126.0703">Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="112" x="722" y="140.9824">[Container: nginx]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="780" y="156.8076"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="189" x="683.5" y="173.1045">Deliver the static resources</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="687.5" y="189.4014">(js, html, images ...) of the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="731" y="205.6982">AllMyData GUI</text><!--MD5=[33573e971ff506c0f246109ca3fd77bd]
entity spa--><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:1.5;" width="217" x="600.5" y="536.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="157" x="630.5" y="560.9453">SPA gui-allmydata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="197" x="610.5" y="575.8574">[Container: javascript, React.js]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="711" y="591.6826"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="634" y="607.9795">Graphical interface for</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="631" y="624.2764">requesting information</text><!--MD5=[870e13a82a9bc0252b17e3ad6e742bb1]
entity mobile--><rect fill="#438DD5" height="120.1094" style="stroke:#3C7FC0;stroke-width:1.5;" width="176" x="853" y="526.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="150" x="863" y="551.4453">AllMyData mobile</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="94" x="894" y="570.0703">application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="127" x="877.5" y="584.9824">[Container: Android]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="943" y="600.8076"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="868" y="617.1045">Graphical interface to</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="873.5" y="633.4014">request information</text><!--MD5=[31b50539c062e48f418cd0b43b66a14f]
entity sm--><rect fill="#438DD5" height="115.4531" style="stroke:#3C7FC0;stroke-width:1.5;" width="195" x="264.5" y="895.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="154" x="285" y="920.4453">service-allmydata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="168" x="276" y="935.3574">[Container: Tomcat, Spring</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="345" y="949.3262">Boot]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="364" y="965.1514"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="278.5" y="981.4482">REST service allowing to</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="294.5" y="997.7451">request information</text><!--MD5=[81eb248ad19e595af57658e74548f0fb]
entity batch--><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:1.5;" width="235" x="678.5" y="902.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="215" x="688.5" y="927.4453">batch-process-requests</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120" x="736" y="942.3574">[Container: groovy]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="798" y="958.1826"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="701" y="974.4795">Process requests, launched</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="724" y="990.7764">by cron every minute</text><!--MD5=[7edcefaa406c65155265f04249a95b70]
entity file--><path d="M297,1314.5938 C297,1304.5938 376,1304.5938 376,1304.5938 C376,1304.5938 455,1304.5938 455,1314.5938 L455,1388.7813 C455,1398.7813 376,1398.7813 376,1398.7813 C376,1398.7813 297,1398.7813 297,1388.7813 L297,1314.5938 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M297,1314.5938 C297,1324.5938 376,1324.5938 376,1324.5938 C376,1324.5938 455,1324.5938 455,1314.5938 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="113" x="319.5" y="1343.4453">file-requests</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="138" x="307" y="1358.3574">[Container: RabbitMQ]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="378" y="1374.1826"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="322.5" y="1390.4795">Stores requests</text><!--MD5=[603ca9136f074a8ec06a33b8559706d8]
entity bdd--><path d="M15.5,1314.5938 C15.5,1304.5938 101,1304.5938 101,1304.5938 C101,1304.5938 186.5,1304.5938 186.5,1314.5938 L186.5,1388.7813 C186.5,1398.7813 101,1398.7813 101,1398.7813 C101,1398.7813 15.5,1398.7813 15.5,1388.7813 L15.5,1314.5938 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M15.5,1314.5938 C15.5,1324.5938 101,1324.5938 101,1324.5938 C101,1324.5938 186.5,1324.5938 186.5,1314.5938 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="123" x="39.5" y="1343.4453">bdd-allmydata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="151" x="25.5" y="1358.3574">[Container: PostgreSQL]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="103" y="1374.1826"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="43.5" y="1390.4795">Internal database</text><!--MD5=[1d51138b063b4ea7af95f6dcbfdcef50]
entity compo--><rect fill="#438DD5" height="99.1563" style="stroke:#3C7FC0;stroke-width:1.5;" width="205" x="563.5" y="1302.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="166" x="583" y="1326.9453">service-compo-pdf</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="116" x="606" y="1341.8574">[Container: Wildfly,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="86" x="623" y="1355.8262">JasperReport]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="668" y="1371.6514"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="577.5" y="1387.9482">Composition REST service</text><!--MD5=[22dcd1ec1e070222742b64049a14c569]
entity smails--><rect fill="#438DD5" height="85.1875" style="stroke:#3C7FC0;stroke-width:1.5;" width="140" x="854" y="1309.0938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="98" x="875" y="1333.9453">mail server</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120" x="864" y="1348.8574">[Container: Postfix]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="926" y="1364.6826"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="884" y="1380.9795">Send emails</text><!--MD5=[3f67c52585c4dc562efcf4859a544515]
entity company--><rect fill="#686868" height="87.5156" style="stroke:#8A8A8A;stroke-width:1.5;" width="213" x="1044.5" y="342.5938"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="81" x="1110.5" y="367.4453">Company</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1153" y="384.2139"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="1058.5" y="400.5107">[person] \ nWeb client (PC,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1102" y="416.8076">tablet, mobile)</text><!--MD5=[d6214fe45677362bd02b65bdf5c033ac]
link company to static_resources--><path d="M1081.3013,342.4949 C1027.6605,308.5558 952.4437,260.9657 890.3357,221.6695 " fill="none" id="company-to-static_resources" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="885.8871,218.8547,891.354,227.047,890.1124,221.5281,895.6313,220.2865,885.8871,218.8547" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="36" x="1103" y="263.5171">Visit</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="185" x="1031" y="280.978">https://allmydata.gouv</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="1053.5" y="295.6543">[HTTPS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="1092" y="309.623">read only]</text><!--MD5=[7bda8a3d1a0942b3be0be0947166e929]
link company to spa--><path d="M1044.2549,429.5747 C1043.1661,429.92 1042.0809,430.2599 1041,430.5938 C982.2741,448.7333 962.758,437.0074 906,460.5938 C861.3278,479.1577 815.5618,507.7379 779.3983,532.9883 " fill="none" id="company-to-spa" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="775.0364,536.0503,784.7008,534.1529,779.1287,533.1774,780.1042,527.6053,775.0364,536.0503" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="77" x="927.5" y="475.5171">Retrieves</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="123" x="907" y="492.978">information via</text><!--MD5=[2724b114cb2ba8fdfd34f7d061d21992]
link company to mobile--><path d="M1104.6546,430.7322 C1076.3339,457.7043 1039.6311,492.6594 1008.1626,522.6294 " fill="none" id="company-to-mobile" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1004.3518,526.2587,1013.6277,522.9483,1007.9725,522.8104,1008.1104,517.1552,1004.3518,526.2587" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="77" x="1091.5" y="475.5171">Retrieves</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="123" x="1071" y="492.978">information via</text><!--MD5=[2bd1df18e5ad84e334d77af3808af277]
link static_resources to spa--><path d="M767.2188,218.7188 C753.6073,304.7276 730.4487,451.0626 717.832,530.7861 " fill="none" id="static_resources-to-spa" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="717.0164,535.9396,722.3743,527.6756,717.7981,531.001,714.4727,526.4249,717.0164,535.9396" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="146" x="747" y="369.5171">Provide to client's</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="106" x="767" y="386.978">web browser</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="750" y="401.6543">[HTTPS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="788.5" y="415.623">read-only]</text><!--MD5=[51f10525928d26d969720f56dab3cbdb]
link spa to sm--><path d="M661.1155,637.1693 C598.1918,703.629 487.7569,820.2699 420.1176,891.7103 " fill="none" id="spa-to-sm" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="416.5285,895.5011,425.6208,891.7156,419.9661,891.8702,419.8114,886.2155,416.5285,895.5011" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="146" x="594" y="731.0171">[1.1] Info request</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="597" y="745.6934">[HTTPS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="635.5" y="759.6621">read only]</text><!--MD5=[4d4e51ad28c3b1d3829418ccf63938ce]
link mobile to sm--><path d="M888.1746,646.9102 C851.808,685.9269 800.8619,735.9084 749,771.5938 C659.388,833.2544 545.5194,883.808 464.5507,915.7587 " fill="none" id="mobile-to-sm" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="459.7516,917.6459,469.5911,918.0746,464.4047,915.816,466.6634,910.6296,459.7516,917.6459" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="142" x="825" y="722.5171">[1.1] Information</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="63" x="867" y="739.978">request</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="828.5" y="754.6543">[HTTPS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="867" y="768.623">read only]</text><!--MD5=[e3894eb214d4b9c2246af59a1a5733d7]
link sm to bdd--><path d="M264.2677,1002.978 C215.4684,1033.1359 160.2999,1076.2937 129,1130.5938 C99.1838,1182.3198 95.1456,1252.0263 96.6381,1299.2181 " fill="none" id="sm-to-bdd" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="96.8223,1304.2851,100.4926,1295.1456,96.6406,1299.2884,92.4979,1295.4364,96.8223,1304.2851" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="148" x="130" y="1183.0171">[1.2] Historization</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="117" x="145.5" y="1200.478">of the request</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="125" x="139.5" y="1215.1543">[JDBC, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="186.5" y="1229.123">write]</text><!--MD5=[a5948cf7f25e2a8d21066f6adcc7c959]
link sm to file--><path d="M331.1232,1010.7229 C303.8053,1069.4417 271.8767,1162.7552 297,1241.0938 C303.7386,1262.1059 316.1053,1282.5203 329.0857,1299.9667 " fill="none" id="sm-to-file" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="332.3959,1304.3368,330.1501,1294.7474,329.3768,1300.3511,323.7731,1299.5778,332.3959,1304.3368" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="112" x="300.5" y="1183.0171">[1.3] Request</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="63" x="327.5" y="1200.478">storage</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="118" x="298" y="1215.1543">[JMS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="35" x="341.5" y="1229.123">write]</text><!--MD5=[9d6d2a40b7c8fff5f50dc87e6a05f1e3]
link batch to file--><path d="M702.6378,1003.6064 C648.5536,1035.6123 581.2489,1080.3678 530,1130.5938 C478.0694,1181.4878 432.4114,1252.0838 404.5631,1299.6753 " fill="none" id="batch-to-file" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="401.9241,1304.2076,409.9096,1298.4428,404.4401,1299.8867,402.9962,1294.4172,401.9241,1304.2076" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="76" x="555.5" y="1183.0171">[2.1] Pop</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="72" x="560" y="1200.478">requests</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="126" x="531" y="1215.1543">[JMS, asynchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="111" x="540.5" y="1229.123">read then delete]</text><!--MD5=[be00085091a1bc3d162589b5e3176d1b]
link batch to scompta--><path d="M870.3344,1003.674 C944.2693,1053.9823 1055.1673,1129.4418 1115.7283,1170.65 " fill="none" id="batch-to-scompta" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1120.0006,1173.557,1114.8098,1165.187,1115.8668,1170.7442,1110.3095,1171.8012,1120.0006,1173.557" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="127" x="1046" y="1055.5171">[2.2] Retrieving</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="89" x="1065" y="1072.978">accounting</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="95" x="1064.5" y="1090.439">information</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="136" x="1042" y="1105.1152">[HTTPS, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="63" x="1080.5" y="1119.084">read only]</text><!--MD5=[cd9a58046204cef197a2f3a62a4a6dee]
link batch to compo--><path d="M759.2273,1003.6301 C736.3111,1037.7785 708.3548,1084.8242 693,1130.5938 C674.6514,1185.2874 668.5202,1251.3237 666.5975,1296.8874 " fill="none" id="batch-to-compo" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="666.3935,1302.0624,670.7452,1293.2271,666.5906,1297.0662,662.7515,1292.9116,666.3935,1302.0624" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="150" x="694" y="1191.5171">[2.3] PDF creation</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="128" x="703" y="1206.1934">[HTTP, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="752" y="1220.1621">read]</text><!--MD5=[eaaeaa2406bfbada0033e97717f8f7df]
link batch to smails--><path d="M812.3413,1003.9689 C837.27,1081.5788 884.4543,1228.477 908.7284,1304.0491 " fill="none" id="batch-to-smails" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="910.2937,1308.9222,911.3496,1299.1301,908.7646,1304.1617,903.7329,1301.5767,910.2937,1308.9222" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="134" x="889" y="1174.0171">[2.4] Request to</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="118" x="897" y="1191.478">send mail with</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="33" x="942" y="1208.939">PDF</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="130" x="891.5" y="1223.6152">[SMTP, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66" x="925.5" y="1237.584">execution]</text><!--MD5=[6b957a4ade014f30a0cd769ada585026]
link smails to company--><path d="M994.2436,1345.9625 C1072.948,1336.3486 1200.5455,1310.4676 1285,1241.0938 C1300.9798,1227.9675 1307,1220.7736 1307,1200.0938 C1307,586.5938 1307,586.5938 1307,586.5938 C1307,524.6127 1259.8422,470.3289 1217.3825,434.0146 " fill="none" id="smails-to-company" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1213.5523,430.7759,1217.8421,439.6415,1217.3704,434.0043,1223.0075,433.5326,1213.5523,430.7759" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="149" x="1308" y="816.5171">[2.5] Sending mail</text><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="73" x="1346" y="833.978">with PDF</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="130" x="1315.5" y="848.6543">[SMTP, synchronous,</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="66" x="1349.5" y="862.623">execution]</text><rect fill="#DDDDDD" height="111.7813" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="199" x="1244" y="1422.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="0" x="1320" y="1442.0889"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="1325" y="1442.0889">Type</text><rect fill="#08427B" height="16.2969" style="stroke:none;stroke-width:1.0;" width="70" x="1250" y="1445.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1274" y="1458.3857"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="1324" y="1458.3857">person</text><rect fill="#686868" height="16.2969" style="stroke:none;stroke-width:1.0;" width="70" x="1250" y="1461.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1274" y="1474.6826"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1324" y="1474.6826">external person</text><rect fill="#1168BD" height="16.2969" style="stroke:none;stroke-width:1.0;" width="70" x="1250" y="1477.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1262" y="1490.9795"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="1324" y="1490.9795">system</text><rect fill="#999999" height="16.2969" style="stroke:none;stroke-width:1.0;" width="70" x="1250" y="1494.2813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1274" y="1507.2764"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="1324" y="1507.2764">external system</text><rect fill="#438DD5" height="16.2969" style="stroke:none;stroke-width:1.0;" width="70" x="1250" y="1510.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1262" y="1523.5732"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1324" y="1523.5732">container</text><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1429.0938" y2="1429.0938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1445.3906" y2="1445.3906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1461.6875" y2="1461.6875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1477.9844" y2="1477.9844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1494.2813" y2="1494.2813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1510.5781" y2="1510.5781"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1437" y1="1526.875" y2="1526.875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1250" x2="1250" y1="1429.0938" y2="1526.875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1320" x2="1320" y1="1429.0938" y2="1526.875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1437" x2="1437" y1="1429.0938" y2="1526.875"/><!--MD5=[ec0f84bfdc5d9d3d7203053277cd9523]
@startuml
' C4-PlantUML, version 1.0.0
' https://github.com/RicardoNiepel/C4-PlantUML

' Colors
' ##################################

!define ELEMENT_FONT_COLOR #FFFFFF

' Styling
' ##################################

!define TECHN_FONT_SIZE 12

skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 14
    Thickness 2
}

skinparam rectangle<<zone>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}

' Layout
' ##################################

!definelong LAYOUT_AS_SKETCH
skinparam backgroundColor #EEEBDC
skinparam handwritten true
skinparam defaultFontName "Comic Sans MS"
center footer <font color=red>Warning:</font> Created for discussion, needs to be validated
!enddefinelong

!define LAYOUT_TOP_DOWN top to bottom direction
!define LAYOUT_LEFT_RIGHT left to right direction

' Boundaries
' ##################################

!define Boundary(e_alias, e_label) rectangle "==e_label" <<zone>> as e_alias
!define Boundary(e_alias, e_label, e_type) rectangle "==e_label\n<size:TECHN_FONT_SIZE>[e_type]</size>" <<zone>> as e_alias

' Relationship
' ##################################

!define Rel_(e_alias1, e_alias2, e_label, e_direction="") e_alias1 e_direction e_alias2 : "===e_label"
!define Rel_(e_alias1, e_alias2, e_label, e_techn, e_direction="") e_alias1 e_direction e_alias2 : "===e_label\n//<size:TECHN_FONT_SIZE>[e_techn]</size>//"

!define Rel(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "- ->")
!define Rel(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "- ->")

!define Rel_Back(e_to, e_from, e_label) Rel_(e_to, e_from, e_label, "<- -")
!define Rel_Back(e_to, e_from, e_label, e_techn) Rel_(e_to, e_from, e_label, e_techn, "<- -")

!define Rel_Neighbor(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "->")
!define Rel_Neighbor(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "->")

!define Rel_Back_Neighbor(e_to, e_from, e_label) Rel_(e_to, e_from, e_label, "<-")
!define Rel_Back_Neighbor(e_to, e_from, e_label, e_techn) Rel_(e_to, e_from, e_label, e_techn, "<-")

!define Rel_D(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "-DOWN->")
!define Rel_D(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "-DOWN->")
!define Rel_Down(e_from,e_to, e_label) Rel_D(e_from,e_to, e_label)
!define Rel_Down(e_from,e_to, e_label, e_techn) Rel_D(e_from,e_to, e_label, e_techn)

!define Rel_U(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "-UP->")
!define Rel_U(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "-UP->")
!define Rel_Up(e_from,e_to, e_label) Rel_U(e_from,e_to, e_label)
!define Rel_Up(e_from,e_to, e_label, e_techn) Rel_U(e_from,e_to, e_label, e_techn)

!define Rel_L(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "-LEFT->")
!define Rel_L(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "-LEFT->")
!define Rel_Left(e_from,e_to, e_label) Rel_L(e_from,e_to, e_label)
!define Rel_Left(e_from,e_to, e_label, e_techn) Rel_L(e_from,e_to, e_label, e_techn)

!define Rel_R(e_from,e_to, e_label) Rel_(e_from,e_to, e_label, "-RIGHT->")
!define Rel_R(e_from,e_to, e_label, e_techn) Rel_(e_from,e_to, e_label, e_techn, "-RIGHT->")
!define Rel_Right(e_from,e_to, e_label) Rel_R(e_from,e_to, e_label)
!define Rel_Right(e_from,e_to, e_label, e_techn) Rel_R(e_from,e_to, e_label, e_techn)

' Layout Helpers
' ##################################

!define Lay_D(e_from, e_to) e_from -[hidden]D- e_to
!define Lay_U(e_from, e_to) e_from -[hidden]U- e_to
!define Lay_R(e_from, e_to) e_from -[hidden]R- e_to
!define Lay_L(e_from, e_to) e_from -[hidden]L- e_to

' Scope: A single software system.
' Primary elements: The software system in scope.
' Supporting elements: People and software systems directly connected to the software system in scope.
' Intended audience: Everybody, both technical and non-technical people, inside and outside of the software development team.

' Colors
' ##################################

!define PERSON_BG_COLOR #08427B
!define EXTERNAL_PERSON_BG_COLOR #686868
!define SYSTEM_BG_COLOR #1168BD
!define EXTERNAL_SYSTEM_BG_COLOR #999999

' Styling
' ##################################

skinparam rectangle<<person>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor PERSON_BG_COLOR
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor EXTERNAL_PERSON_BG_COLOR
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor SYSTEM_BG_COLOR
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor EXTERNAL_SYSTEM_BG_COLOR
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor SYSTEM_BG_COLOR
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor EXTERNAL_SYSTEM_BG_COLOR
    BorderColor #8A8A8A
}

' Layout
' ##################################

!definelong LAYOUT_WITH_LEGEND
hide stereotype
legend right
|=              |= Type |
|<PERSON_BG_COLOR>      | person |
|<EXTERNAL_PERSON_BG_COLOR>      | external person |
|<SYSTEM_BG_COLOR>   | system |
|<EXTERNAL_SYSTEM_BG_COLOR>      | external system |
endlegend
!enddefinelong

' Elements
' ##################################

!define Person(e_alias, e_label) rectangle "==e_label" <<person>> as e_alias
!define Person(e_alias, e_label, e_descr) rectangle "==e_label\n\n e_descr" <<person>> as e_alias

!define Person_Ext(e_alias, e_label) rectangle "==e_label" <<external_person>> as e_alias
!define Person_Ext(e_alias, e_label, e_descr) rectangle "==e_label\n\n e_descr" <<external_person>> as e_alias

!define System(e_alias, e_label) rectangle "==e_label" <<system>> as e_alias
!define System(e_alias, e_label, e_descr) rectangle "==e_label\n\n e_descr" <<system>> as e_alias

!define System_Ext(e_alias, e_label) rectangle "==e_label" <<external_system>> as e_alias
!define System_Ext(e_alias, e_label, e_descr) rectangle "==e_label\n\n e_descr" <<external_system>> as e_alias

!define SystemDb(e_alias, e_label) database "==e_label" <<system>> as e_alias
!define SystemDb(e_alias, e_label, e_descr) database "==e_label\n\n e_descr" <<system>> as e_alias

!define SystemDb_Ext(e_alias, e_label) database "==e_label" <<external_system>> as e_alias
!define SystemDb_Ext(e_alias, e_label, e_descr) database "==e_label\n\n e_descr" <<external_system>> as e_alias

' Boundaries
' ##################################

!define Enterprise_Boundary(e_alias, e_label) Boundary(e_alias, e_label, "Enterprise")
!define System_Boundary(e_alias, e_label) Boundary(e_alias, e_label, "System")

' Scope: A single software system.
' Primary elements: Containers within the software system in scope.
' Supporting elements: People and software systems directly connected to the containers.
' Intended audience: Technical people inside and outside of the software development team; including software architects, developers and operations/support staff.

' Colors
' ##################################

!define CONTAINER_BG_COLOR #438DD5

' Styling
' ##################################

skinparam rectangle<<unité déployable>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor CONTAINER_BG_COLOR
    BorderColor #3C7FC0
}

skinparam database<<unité déployable>> {
    StereotypeFontColor ELEMENT_FONT_COLOR
    FontColor ELEMENT_FONT_COLOR
    BackgroundColor CONTAINER_BG_COLOR
    BorderColor #3C7FC0
}

' Layout
' ##################################

!definelong LAYOUT_WITH_LEGEND
hide stereotype
legend right
|=              |= Type |
|<PERSON_BG_COLOR>      | person |
|<EXTERNAL_PERSON_BG_COLOR>      | external person |
|<SYSTEM_BG_COLOR>   | system |
|<EXTERNAL_SYSTEM_BG_COLOR>      | external system |
|<CONTAINER_BG_COLOR>   | container |
endlegend
!enddefinelong

' Elements
' ##################################

!define Container(e_alias, e_label) rectangle "==e_label" <<unité déployable>> as e_alias
!define Container(e_alias, e_label, e_techn) rectangle "==e_label\n//<size:TECHN_FONT_SIZE>[e_techn]</size>//" <<unité déployable>> as e_alias
!define Container(e_alias, e_label, e_techn, e_descr) rectangle "==e_label\n//<size:TECHN_FONT_SIZE>[e_techn]</size>//\n\n e_descr" <<unité déployable>> as e_alias

!define ContainerDb(e_alias, e_label, e_techn) database "==e_label\n//<size:TECHN_FONT_SIZE>[e_techn]</size>//" <<unité déployable>> as e_alias
!define ContainerDb(e_alias, e_label, e_techn, e_descr) database "==e_label\n//<size:TECHN_FONT_SIZE>[e_techn]</size>//\n\n e_descr" <<unité déployable>> as e_alias

' Boundaries
' ##################################

!define Container_Boundary(e_alias, e_label) Boundary(e_alias, e_label, "Container")
title detailed-application-architecture
header Container diagram \ nDetailed application point of view \ n My Online Info Project (AllMyData)
LAYOUT_WITH_LEGEND()
Person_Ext(company, "Company", "[person] \ nWeb client (PC, tablet, mobile)")

System_Boundary(administration, "System administration B") {
    Container(scompta, "Accounting system", "REST service")
}

System_Boundary(si, "Information System") {
    Container(static_resources, "gui-allmydata Web Application", "Container: nginx", "Deliver the static resources (js, html, images ...) of the AllMyData GUI")
    Container(spa, "SPA gui-allmydata", "Container: javascript, React.js", "Graphical interface for requesting information")
    Container(mobile, "AllMyData mobile application", "Container: Android", "Graphical interface to request information")
    Container(sm, "service-allmydata", "Container: Tomcat, Spring Boot", "REST service allowing to request information")
    Container(batch, "batch-process-requests", "Container: groovy", "Process requests, launched by cron every minute")
    ContainerDb(file, "file-requests", "Container: RabbitMQ", "Stores requests")
    ContainerDb(bdd, "bdd-allmydata", "Container: PostgreSQL", "Internal database")
    Container(compo, "service-compo-pdf", "Container: Wildfly, JasperReport", "Composition REST service")
    Container(smails, "mail server", "Container: Postfix", "Send emails")
}

Rel(company, static_resources, "Visit https://allmydata.gouv", "HTTPS, synchronous, read only")
Rel(company, spa, "Retrieves information via")
Rel(company, mobile, "Retrieves information via")
Rel(static_resources, spa, "Provide to client's web browser", "HTTPS, synchronous, read-only")
Rel(spa, sm, "[1.1] Info request", "HTTPS, synchronous, read only")
Rel(mobile, sm, "[1.1] Information request", "HTTPS, synchronous, read only")
Rel(sm, bdd, "[1.2] Historization of the request", "JDBC, synchronous, write")
Rel(sm, file, "[1.3] Request storage", "JMS, synchronous, write")
Rel(batch, file, "[2.1] Pop requests", "JMS, asynchronous, read then delete")
Rel(batch, scompta, "[2.2] Retrieving accounting information", "HTTPS, synchronous, read only")
Rel(batch, compo, "[2.3] PDF creation", "HTTP, synchronous, read")
Rel(batch, smails, "[2.4] Request to send mail with PDF", "SMTP, synchronous, execution")
Rel(smails, company, "[2.5] Sending mail with PDF", "SMTP, synchronous, execution")
@enduml

@startuml





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 14
    Thickness 2
}

skinparam rectangle<<zone>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}







title detailed-application-architecture
header Container diagram \ nDetailed application point of view \ n My Online Info Project (AllMyData)
hide stereotype
legend right
|=              |= Type |
|<#08427B>      | person |
|<#686868>      | external person |
|<#1168BD>   | system |
|<#999999>      | external system |
|<#438DD5>   | container |
endlegend
rectangle "==Company\n\n [person] \ nWeb client (PC, tablet, mobile)" <<external_person>> as company

rectangle "==System administration B\n<size:12>[System]</size>" <<zone>> as administration {
    rectangle "==Accounting system\n//<size:12>[REST service]</size>//" <<unité déployable>> as scompta
}

rectangle "==Information System\n<size:12>[System]</size>" <<zone>> as si {
    rectangle "==gui-allmydata Web Application\n//<size:12>[Container: nginx]</size>//\n\n Deliver the static resources (js, html, images ...) of the AllMyData GUI" <<unité déployable>> as static_resources
    rectangle "==SPA gui-allmydata\n//<size:12>[Container: javascript, React.js]</size>//\n\n Graphical interface for requesting information" <<unité déployable>> as spa
    rectangle "==AllMyData mobile application\n//<size:12>[Container: Android]</size>//\n\n Graphical interface to request information" <<unité déployable>> as mobile
    rectangle "==service-allmydata\n//<size:12>[Container: Tomcat, Spring Boot]</size>//\n\n REST service allowing to request information" <<unité déployable>> as sm
    rectangle "==batch-process-requests\n//<size:12>[Container: groovy]</size>//\n\n Process requests, launched by cron every minute" <<unité déployable>> as batch
    database "==file-requests\n//<size:12>[Container: RabbitMQ]</size>//\n\n Stores requests" <<unité déployable>> as file
    database "==bdd-allmydata\n//<size:12>[Container: PostgreSQL]</size>//\n\n Internal database" <<unité déployable>> as bdd
    rectangle "==service-compo-pdf\n//<size:12>[Container: Wildfly, JasperReport]</size>//\n\n Composition REST service" <<unité déployable>> as compo
    rectangle "==mail server\n//<size:12>[Container: Postfix]</size>//\n\n Send emails" <<unité déployable>> as smails
}

company - -> static_resources : "===Visit https://allmydata.gouv\n//<size:12>[HTTPS, synchronous, read only]</size>//"
company - -> spa : "===Retrieves information via"
company - -> mobile : "===Retrieves information via"
static_resources - -> spa : "===Provide to client's web browser\n//<size:12>[HTTPS, synchronous, read-only]</size>//"
spa - -> sm : "===[1.1] Info request\n//<size:12>[HTTPS, synchronous, read only]</size>//"
mobile - -> sm : "===[1.1] Information request\n//<size:12>[HTTPS, synchronous, read only]</size>//"
sm - -> bdd : "===[1.2] Historization of the request\n//<size:12>[JDBC, synchronous, write]</size>//"
sm - -> file : "===[1.3] Request storage\n//<size:12>[JMS, synchronous, write]</size>//"
batch - -> file : "===[2.1] Pop requests\n//<size:12>[JMS, asynchronous, read then delete]</size>//"
batch - -> scompta : "===[2.2] Retrieving accounting information\n//<size:12>[HTTPS, synchronous, read only]</size>//"
batch - -> compo : "===[2.3] PDF creation\n//<size:12>[HTTP, synchronous, read]</size>//"
batch - -> smails : "===[2.4] Request to send mail with PDF\n//<size:12>[SMTP, synchronous, execution]</size>//"
smails - -> company : "===[2.5] Sending mail with PDF\n//<size:12>[SMTP, synchronous, execution]</size>//"
@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>